import{l as t,C as s,f as g,i as f,M as v}from"./index-CLDJFe_s.js";import"./matrix-sdk-crypto-wasm-COx1Ym5k.js";async function _(o,r){var n;try{const e=o();if(!e)return t.log("No session stored; continuing without a client"),null;t.log("Using a standalone client");const{user_id:l,device_id:c,access_token:a,passwordlessUser:u}=e,d={baseUrl:s.defaultHomeserverUrl(),accessToken:a,userId:l,deviceId:c,fallbackICEServerAllowed:g,livekitServiceURL:(n=s.get().livekit)==null?void 0:n.livekit_service_url};try{return{widgetApi:null,client:await f(d,!0),passwordlessUser:u}}catch(i){if(i instanceof v&&i.errcode==="M_UNKNOWN_TOKEN")return t.log("The session from local store is invalid; continuing without a client"),r(),null;throw i}}catch(e){throw r(),e}}export{_ as initSPA};
//# sourceMappingURL=spa-DUnmNocp.js.map
